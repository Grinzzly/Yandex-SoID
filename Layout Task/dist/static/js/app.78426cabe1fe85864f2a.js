webpackJsonp([1],{"/bVf":function(t,e){t.exports={root:"src-components-DatePicker--root_0",monthSelector:"src-components-DatePicker--monthSelector_0",days:"src-components-DatePicker--days_0",day:"src-components-DatePicker--day_0",day_active:"src-components-DatePicker--day_active_0"}},"0A8m":function(t,e){t.exports={root:"src-components-EditEvent--root_0",heading:"src-components-EditEvent--heading_0",time:"src-components-EditEvent--time_0",topic:"src-components-EditEvent--topic_0",dateAndTime:"src-components-EditEvent--dateAndTime_0",hr:"src-components-EditEvent--hr_0",timeRange:"src-components-EditEvent--timeRange_0",dash:"src-components-EditEvent--dash_0"}},CWzj:function(t,e){t.exports={input:"src-styles-helpers--input",srOnly:"src-styles-helpers--srOnly",label:"src-styles-helpers--label"}},EhG2:function(t,e){t.exports={verticalLine:"src-components-CurrentTimePointer--verticalLine_0",hour:"src-components-CurrentTimePointer--hour_0"}},Gwei:function(t,e){t.exports={input:"src-styles-helpers--input",srOnly:"src-styles-helpers--srOnly",label:"src-styles-helpers--label"}},IcM0:function(t,e){t.exports={eventRectangle:"src-components-EventRectangle--eventRectangle_0",tooltip:"src-components-EventRectangle--tooltip_0",tooltipPointer:"src-components-EventRectangle--tooltipPointer_0",title:"src-components-EventRectangle--title_0",dateAndRoom:"src-components-EventRectangle--dateAndRoom_0",attendees:"src-components-EventRectangle--attendees_0",attendeesText:"src-components-EventRectangle--attendeesText_0",otherAttendees:"src-components-EventRectangle--otherAttendees_0"}},KuZ3:function(t,e){t.exports={calendarButton:"src-components-DateInput--calendarButton_0",calendarIcon:"src-components-DateInput--calendarIcon_0",calendarButton_active:"src-components-DateInput--calendarButton_active_0",dateInput:"src-components-DateInput--dateInput_0",datePicker:"src-components-DateInput--datePicker_0"}},MJBa:function(t,e){t.exports={container:"src-components-FieldInput--container_0"}},MOV9:function(t,e){t.exports={input:"src-styles-helpers--input",srOnly:"src-styles-helpers--srOnly",label:"src-styles-helpers--label"}},MaSs:function(t,e){t.exports={input:"src-styles-helpers--input",srOnly:"src-styles-helpers--srOnly",label:"src-styles-helpers--label"}},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n("/5sW"),i={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("app-header"),this._v(" "),e("router-view")],1)},staticRenderFns:[]};var o=n("VU/8")(null,i,!1,function(t){n("y6yj")},null,null).exports,r=n("/ocq"),a=n("fZjL"),c=n.n(a),l=n("bOdI"),u=n.n(l),d=n("Gu7T"),p=n.n(d),m=n("Dd8w"),h=n.n(m),f=n("PJh5"),v=n.n(f),_=n("NYxO"),g=n("MVge"),y=n.n(g),b=n("VJOs"),k=n.n(b),x=n("l8W7"),E=n.n(x),S={data:function(){return{hoursRange:y()(8,24),showDatePicker:!1}},methods:h()({},Object(_.b)({fetchRooms:"rooms/fetch",fetchEvents:"events/fetch"}),{openDatePicker:function(){this.showDatePicker=!0},closeDatePicker:function(){this.showDatePicker=!1}}),computed:h()({},Object(_.c)("date",["earliestMoment","latestMoment"]),Object(_.e)({rooms:function(t){return t.rooms.data},events:function(t){return t.events.data}}),{roomsByFloor:function(){return this.rooms.reduce(function(t,e){return h()({},t,u()({},e.floor,[].concat(p()(t[e.floor]||[]),[e])))},{})},floors:function(){return c()(this.roomsByFloor).sort(function(t,e){return t-e})},eventsByRoomId:function(){return E()(k()(["room","id"]),this.eventsOnChosenDate)},eventsOnChosenDate:function(){var t=this;return this.events?this.events.filter(function(e){return v()(e.dateStart).isBetween(t.earliestMoment,t.latestMoment,null,"[]")}):[]}}),created:function(){this.fetchRooms(),this.fetchEvents()}},w={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.s.root},[n("div",{class:t.s.pickers},[n("day-picker",{on:{dateClick:t.openDatePicker}}),t._v(" "),t.showDatePicker?n("date-picker-home",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.closeDatePicker,expression:"closeDatePicker"}],class:t.s.datePicker}):t._e()],1),t._v(" "),n("div",{class:t.s.rooms},[n("div",{class:t.s.roomList},[n("div",{class:t.s.timeLine}),t._v(" "),n("ul",{class:t.s.list},t._l(t.floors,function(e){return n("li",{key:e},[n("div",{class:t.s.floor},[t._v(t._s(e)+" этаж")]),t._v(" "),n("ul",{class:t.s.list},t._l(t.roomsByFloor[e],function(e){return n("li",{key:e.id,class:t.s.listItem},[n("div",{class:t.s.roomTitle},[t._v(t._s(e.title))]),t._v(" "),n("div",{class:t.s.roomCapacity},[t._v("до "+t._s(e.capacity)+" человек")])])}))])}))]),t._v(" "),n("div",{class:t.s.eventsDiagram},[n("div",{class:t.s.timeLine}),t._v(" "),t._l(t.hoursRange,function(t,e){return n("time-pointer",{key:t,attrs:{"formatted-time":t,left:(e+1)*(100/17)+"%"}})}),t._v(" "),n("current-time-pointer"),t._v(" "),t._l(t.floors,function(e){return n("div",{key:e},[n("div",{class:t.s.floor}),t._v(" "),t._l(t.roomsByFloor[e],function(e){return n("time-band",{key:e.id,attrs:{events:t.eventsByRoomId[e.id]}})})],2)})],2)])])},staticRenderFns:[]};var D,O=n("VU/8")(S,w,!1,function(t){this.s=n("txkK")},null,null).exports,M=n("BXPN"),P=n("apnq"),T={props:["eventId"],mixins:[(D={mutators:M.a,validateOnBlur:!0},{data:function(){return{form:Object(P.a)(h()({},D,{initialValues:D.initialValues||this.initialValues,onSubmit:D.onSubmit||this.handleSubmit,validate:D.validate||this.validate})),formState:null}},provide:function(){return{form:this.form}},created:function(){var t=this;this.unsubscribe=this.form.subscribe(function(e){t.formState=e},{values:!0,errors:!0})},beforeDestroy:function(){this.unsubscribe()}})],methods:{handleSubmit:function(){},validate:function(t){var e={};v()(t.timeStart,"k:mm").isValid()||(e.timeStart="Время начала введено в некорректном формате"),v()(t.timeEnd,"k:mm").isValid()||(e.timeEnd="Время конца введено в некорректном формате")}}},C={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.s.root},[n("form",[n("h1",{class:t.s.heading},[t._v(t._s(t.eventId?"Редактирование встречи":"Новая встреча"))]),t._v(" "),n("label",{class:t.sh.label,attrs:{for:"title"}},[t._v("Тема")]),t._v(" "),n("field-input",{class:t.s.topic,attrs:{name:"title",placeholder:"О чём будете говорить?"}}),t._v(" "),n("div",{class:t.s.dateAndTime},[n("div",{class:t.sh.label},[t._v("Дата и время")]),t._v(" "),n("date-input"),t._v(" "),n("div",{class:t.s.timeRange},[n("label",{class:t.sh.srOnly,attrs:{for:"timeStart"}},[t._v("Начало")]),t._v(" "),n("field-input",{class:t.s.time,attrs:{name:"timeStart",placeholder:"Начало"}}),t._v(" "),n("div",{class:t.s.dash},[t._v("—")]),t._v(" "),n("label",{class:t.sh.srOnly,attrs:{for:"timeEnd"}},[t._v("Конец")]),t._v(" "),n("field-input",{class:t.s.time,attrs:{name:"timeEnd",placeholder:"Конец"}})],1)],1),t._v(" "),n("hr",{class:t.s.hr}),t._v(" "),n("attendees-input"),t._v(" "),n("hr",{class:t.s.hr})],1)])},staticRenderFns:[]};var A=n("VU/8")(T,C,!1,function(t){this.s=n("0A8m"),this.sh=n("Gwei")},null,null).exports;s.a.use(r.a);var I=new r.a({mode:"history",routes:[{path:"/",component:O},{path:"/events/create",component:A}]}),B={id:"logo-usage",viewBox:"0 0 150 22",url:n.p+"static/sprite.svg#logo-usage",toString:function(){return this.url}},F={data:function(){return{logo:B}}},R={render:function(){var t=this.$createElement,e=this._self._c||t;return e("header",{class:this.s.header},[e("router-link",{attrs:{to:"/"}},[e("svg",{class:this.s.logo},[e("use",{attrs:{"xlink:href":this.logo.url}})]),this._v(" "),e("h1",{class:this.sh.srOnly},[this._v("Яндекс Переговорки")])])],1)},staticRenderFns:[]};var V=n("VU/8")(F,R,!1,function(t){this.s=n("pEhl"),this.sh=n("CWzj")},null,null).exports,L=n("lGpV"),U=n.n(L),H={data:function(){return{showCalendar:!1}},methods:Object(_.d)("date",{handlePrevious:"GO_TO_PREVIOUS_DAY",handleNext:"GO_TO_NEXT_DAY"}),computed:h()({},Object(_.e)("date",["date"]),{formattedDate:function(){var t=v()(this.date),e=t.format("D MMM"),n=t.calendar(null,{lastDay:"[Вчера]",sameDay:"[Сегодня]",nextDay:"[Завтра]",nextWeek:"dddd",lastWeek:"dddd",sameElse:"dddd"});return e+" · "+U()(n)}})},N={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.s.dateSelector},[n("arrow-button",{attrs:{title:"Предыдущий день"},nativeOn:{click:function(e){t.handlePrevious(e)}}}),t._v(" "),n("button",{class:t.s.dateButton,attrs:{type:"button"},on:{click:function(e){t.$emit("dateClick")}}},[t._v("\n    "+t._s(t.formattedDate)+"\n  ")]),t._v(" "),n("arrow-button",{attrs:{title:"Следующий день",direction:"right"},nativeOn:{click:function(e){t.handleNext(e)}}})],1)},staticRenderFns:[]};var j=n("VU/8")(H,N,!1,function(t){this.s=n("Rjs2")},null,null).exports,Y={id:"arrow-usage",viewBox:"0 0 9 14",url:n.p+"static/sprite.svg#arrow-usage",toString:function(){return this.url}},$={data:function(){return{arrow:Y}},props:{direction:{type:String,default:"left"},title:{type:String,required:!0}}},q={render:function(){var t,e=this,n=e.$createElement,s=e._self._c||n;return s("button",{class:[e.s.arrow,(t={},t[e.s.arrow_right]="right"===e.direction,t)],attrs:{type:"button"}},[s("span",{class:e.sh.srOnly},[e._v(e._s(e.title))]),e._v(" "),s("svg",[s("use",{attrs:{"xlink:href":e.arrow.url}})])])},staticRenderFns:[]};var G=n("VU/8")($,q,!1,function(t){this.s=n("xMxq"),this.sh=n("MOV9")},null,null).exports,W={data:function(){return{lookingAtDate:this.unixDate,weekdays:["пн","вт","ср","чт","пт","сб","вс"]}},props:{unixDate:{type:Number,required:!0}},methods:{handlePrevious:function(){this.lookingAtDate=this.lookingAtMoment.clone().subtract(1,"month").valueOf()},handleNext:function(){this.lookingAtDate=this.lookingAtMoment.clone().add(1,"month").valueOf()},handleChangeDate:function(t){this.$emit("dateChange",this.lookingAtMoment.clone().date(t).valueOf())}},computed:{givenMoment:function(){return v()(this.unixDate)},lookingAtMoment:function(){return v()(this.lookingAtDate)},offset:function(){return 45*this.lookingAtMoment.clone().date(1).weekday()+"px"},daysInMonth:function(){return this.lookingAtMoment.daysInMonth()},monthNameAndYear:function(){return this.lookingAtMoment.format("MMMM YYYY")},dayOfMonth:function(){return this.givenMoment.isSame(this.lookingAtMoment,"month")?this.givenMoment.date():0}}},z={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.s.root},[n("div",{class:t.s.monthSelector},[n("arrow-button",{attrs:{title:"Предыдущий месяц"},nativeOn:{click:function(e){t.handlePrevious(e)}}}),t._v(" "),n("div",{class:t.s.month},[t._v(t._s(t.monthNameAndYear))]),t._v(" "),n("arrow-button",{attrs:{title:"Следующий месяц",direction:"right"},nativeOn:{click:function(e){t.handleNext(e)}}})],1),t._v(" "),n("div",{class:t.s.days},[t._l(t.weekdays,function(e){return n("div",{key:e,class:t.s.day},[t._v(t._s(e))])}),t._v(" "),n("div",{style:{width:t.offset}}),t._v(" "),t._l(t.daysInMonth,function(e){return n("button",{key:e,class:[t.s.day,(s={},s[t.s.day_active]=e===t.dayOfMonth,s)],attrs:{type:"button"},on:{click:function(n){t.handleChangeDate(e)}}},[t._v("\n      "+t._s(e)+"\n    ")]);var s})],2)])},staticRenderFns:[]};var J=n("VU/8")(W,z,!1,function(t){this.s=n("/bVf")},null,null).exports,K={data:function(){return{isTooltipVisible:!1,tooltipLeft:0}},props:{event:{type:Object,required:!0}},methods:{noun:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["рубль","рубля","рублей"],n=Math.abs(t)%100,s=n%10;return 0!=10*n%10?e[1]:n>10&&n<20?e[2]:s>1&&s<5?e[1]:1===s?e[0]:e[2]},showTooltip:function(){var t=this;this.isTooltipVisible||(this.isTooltipVisible=!0,this.$nextTick(function(){t.tooltipLeft="-"+t.$refs.tooltip.getBoundingClientRect().left+"px"}))},hideTooltip:function(){this.isTooltipVisible=!1,this.tooltipLeft=0}},computed:h()({},Object(_.c)("date",["earliestMoment"]),{dateStart:function(){return v()(this.event.dateStart)},dateEnd:function(){return v()(this.event.dateEnd)},eventPosition:function(){return{left:Math.abs(this.earliestMoment.diff(this.dateStart,"hours",!0))*(100/17)+"%",width:this.dateEnd.diff(this.dateStart,"hours",!0)*(100/17)+"%"}},eventDate:function(){return this.dateStart.format("D MMMM, H:mm")+"—"+this.dateEnd.format("H:mm")},firstAttendee:function(){return this.event.users[0]},otherAttendeesCount:function(){return this.event.users.length-1}})},X={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.s.eventRectangle,style:{left:t.eventPosition.left,width:t.eventPosition.width},on:{click:t.showTooltip}},[t.isTooltipVisible?n("div",{class:t.s.tooltipPointer}):t._e(),t._v(" "),t.isTooltipVisible?n("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.hideTooltip,expression:"hideTooltip"}],ref:"tooltip",class:t.s.tooltip,style:{left:t.tooltipLeft}},[n("div",{class:t.s.title},[t._v(t._s(t.event.title))]),t._v(" "),n("div",{class:t.s.dateAndRoom},[t._v(t._s(t.eventDate)+" · "+t._s(t.event.room.title))]),t._v(" "),n("div",{class:t.s.attendees},[n("avatar-image",{attrs:{src:t.firstAttendee.avatarUrl}}),t._v(" "),n("div",{class:t.s.attendeesText},[t._v(t._s(t.firstAttendee.login)+" "),n("span",{class:t.s.otherAttendees},[t._v("и "+t._s(t.otherAttendeesCount)+" "+t._s(t.noun(t.otherAttendeesCount,["участник","участника","участников"])))])])],1)]):t._e()])},staticRenderFns:[]};var Q=n("VU/8")(K,X,!1,function(t){this.s=n("IcM0")},null,null).exports,Z={id:"cross-usage",viewBox:"0 0 13 13",url:n.p+"static/sprite.svg#cross-usage",toString:function(){return this.url}},tt={data:function(){return{icons:{cross:Z}}},props:{events:{type:Array,default:function(){return[]}}},computed:h()({},Object(_.c)("date",["earliestMoment","latestMoment"]),{gapsPositions:function(){var t=this,e=this.events.reduce(function(t,e){return t.push(v()(e.dateStart),v()(e.dateEnd)),t},[]);return[this.earliestMoment].concat(p()(e),[this.latestMoment]).reduce(function(e,n,s,i){if(s%2==0){for(var o=i.slice(s,s+2),r=o[0],a=o[1];r.isBefore(a,"minute");){var c=v.a.min(r.clone().add(1,"hours").set({minute:0,second:0}),a),l={left:Math.abs(t.earliestMoment.diff(r,"hours",!0))*(100/17)+"%",width:c.diff(r,"hours",!0)*(100/17)+"%"};r=c,e.push(l)}return e}return e},[])}})},et={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.s.timeBand},[t._l(t.gapsPositions,function(e,s){return n("div",{key:"gap-"+s,class:t.s.gap,style:{left:e.left,width:e.width}},[n("button",{class:t.s.gapAdd,attrs:{type:"button"},on:{click:function(e){t.$router.push("events/create")}}},[n("svg",{class:t.s.cross},[n("use",{attrs:{"xlink:href":t.icons.cross.url}})])])])}),t._v(" "),t._l(t.events,function(t){return n("event-rectangle",{key:"event-"+t.id,attrs:{event:t}})})],2)},staticRenderFns:[]};var nt=n("VU/8")(tt,et,!1,function(t){this.s=n("leNA")},null,null).exports,st={id:"calendar-usage",viewBox:"0 0 14 14",url:n.p+"static/sprite.svg#calendar-usage",toString:function(){return this.url}},it={data:function(){return{isDatePickerVisible:!1,field:null,icons:{calendar:st}}},inject:["form"],methods:{changeDate:function(t){this.field.change(v()(t).format("D MMMM, YYYY"))},validate:function(t){if(!v()(t,"D MMMM, YYYY").isValid())return"Дата введена в некорректном формате"}},computed:{unixDate:function(){var t=v()(this.field.value,"D MMMM, YYYY");return t.isValid()?t.valueOf():Date.now()}},created:function(){var t=this;this.unsubscribeField=this.form.registerField("date",function(e){t.field=e},{value:!0},{validate:this.validate})},beforeDestroy:function(){this.unsubscribeField()}},ot={render:function(){var t,e=this,n=e.$createElement,s=e._self._c||n;return s("div",{class:e.s.dateInput},[s("label",[s("span",{class:e.sh.srOnly},[e._v("Дата")]),e._v(" "),s("input",{class:e.sh.input,attrs:{type:"text",placeholder:"Дата"},domProps:{value:e.field.value||""},on:{blur:e.field.blur,input:function(t){e.field.change(t.target.value)},focus:e.field.focus}})]),e._v(" "),s("button",{class:[e.s.calendarButton,(t={},t[e.s.calendarButton_active]=e.isDatePickerVisible,t)],attrs:{type:"button"},on:{click:function(t){e.isDatePickerVisible=!e.isDatePickerVisible}}},[s("svg",{class:e.s.calendarIcon},[s("use",{attrs:{"xlink:href":e.icons.calendar.url}})]),e._v(" "),s("span",{class:e.sh.srOnly},[e._v(e._s(e.isDatePickerVisible?"Скрыть календарь":"Показать календарь"))])]),e._v(" "),e.isDatePickerVisible?s("date-picker",{class:e.s.datePicker,attrs:{"unix-date":e.unixDate},on:{dateChange:e.changeDate}}):e._e()],1)},staticRenderFns:[]};var rt=n("VU/8")(it,ot,!1,function(t){this.s=n("KuZ3"),this.sh=n("jMvO")},null,null).exports,at=function(t){return{data:function(){return{field:null}},inject:["form"],created:function(){var e=this;this.unsubscribeField=this.form.registerField(t||this.name,function(t){e.field=t},{value:!0,active:!0},{validate:this.validate})},beforeDestroy:function(){this.unsubscribeField()}}},ct={mixins:[at()],props:{name:{type:String,required:!0},validate:{type:Function},inputClass:{type:String},placeholder:{type:String}},methods:{clearField:function(){this.field.change(""),this.$refs.input.focus()},blurField:function(){this.field.active&&this.field.blur()}}},lt={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.blurField,expression:"blurField"}],class:t.s.container},[n("input",{ref:"input",class:[t.sh.input,t.inputClass],attrs:{type:"text",id:t.name,placeholder:t.placeholder},domProps:{value:t.field.value||""},on:{input:function(e){t.field.change(e.target.value)},focus:t.field.focus}}),t._v(" "),t.field.active&&t.field.value&&""!==t.field.value?n("cross-button",{nativeOn:{click:function(e){t.clearField(e)}}}):t._e()],1)},staticRenderFns:[]};var ut=n("VU/8")(ct,lt,!1,function(t){this.s=n("MJBa"),this.sh=n("Yu73")},null,null).exports,dt={props:{left:{type:String,required:!0},formattedTime:{type:[String,Number],required:!0},formattedTimeClass:{type:String},lineClass:{type:String}}},pt={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.s.timePointer,style:{left:t.left}},[n("div",{class:[t.s.hour,t.formattedTimeClass]},[t._v(t._s(t.formattedTime))]),t._v(" "),n("div",{class:[t.s.verticalLine,t.lineClass]})])},staticRenderFns:[]};var mt=n("VU/8")(dt,pt,!1,function(t){this.s=n("huMp")},null,null).exports,ht=n("woOf"),ft=n.n(ht),vt={data:function(){return{format:null,position:null}},methods:{setCurrentTime:function(){var t=v()(),e=t.format("k:mm");if(this.format!==e){var n=void 0,s=t.diff(v()().set({hour:7,minute:0,second:0}),"hours",!0);s<0&&(n="0"),s>17&&(n="100%"),ft()(this,{format:t.format("k:mm"),position:n||s*(100/17)+"%"})}}},mounted:function(){this.setCurrentTime(),this.currentTimeUpdateInterval=setInterval(this.setCurrentTime,1e3)},beforeDestroy:function(){clearInterval(this.currentTimeUpdateInterval)}},_t={render:function(){var t=this.$createElement,e=this._self._c||t;return this.format&&this.position?e("time-pointer",{attrs:{"formatted-time":this.format,left:this.position,"formatted-time-class":this.s.hour,"line-class":this.s.verticalLine}}):this._e()},staticRenderFns:[]};var gt=n("VU/8")(vt,_t,!1,function(t){this.s=n("EhG2")},null,null).exports,yt={computed:Object(_.e)("date",["date"]),methods:Object(_.d)("date",{changeDate:"SET_DATE"})},bt={render:function(){var t=this.$createElement;return(this._self._c||t)("date-picker",{attrs:{unixDate:this.date},on:{dateChange:this.changeDate}})},staticRenderFns:[]},kt=n("VU/8")(yt,bt,!1,null,null,null).exports,xt=n("GKWh"),Et=n.n(xt),St=n("xf7G"),wt=n.n(St),Dt={data:function(){return{attendeeName:"",showSuggestions:!1}},mixins:[at("usersIds")],computed:h()({},Object(_.e)({users:function(t){return t.users.data}}),{suggestions:function(){var t=this;return this.users.filter(function(e){return new RegExp(t.attendeeName,"g").test(e.login)&&!(t.field.value||[]).includes(e.id)})},usersById:function(){return Et()(wt()("id"),this.users)}}),methods:h()({},Object(_.b)({fetchUsers:"users/fetch"}),{hideSuggestions:function(){this.showSuggestions&&(this.showSuggestions=!1)},clearField:function(){this.attendeeName="",this.$refs.input.focus()},pushUser:function(t){this.form.mutators.push("usersIds",t.id),this.clearField()}}),created:function(){this.fetchUsers()}},Ot={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.s.attendees},[n("label",{class:t.sh.label,attrs:{for:"attendees"}},[t._v("Участники")]),t._v(" "),n("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.hideSuggestions,expression:"hideSuggestions"}],class:t.s.inputContainer},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.attendeeName,expression:"attendeeName"}],ref:"input",class:[t.sh.input,t.s.input],attrs:{id:"attendees",type:"text",placeholder:"Например, Тор Одинович"},domProps:{value:t.attendeeName},on:{focus:function(e){t.showSuggestions=!0},input:function(e){e.target.composing||(t.attendeeName=e.target.value)}}}),t._v(" "),t.showSuggestions&&""!==t.attendeeName?n("cross-button",{class:t.s.clearButton,nativeOn:{click:function(e){t.clearField(e)}}}):t._e(),t._v(" "),t.showSuggestions?n("div",{class:t.s.suggestions},t._l(t.suggestions,function(e){return n("button",{key:e.id,class:t.s.suggestion,attrs:{type:"button"},on:{click:function(n){t.pushUser(e)}}},[n("avatar-image",{class:t.s.avatar,attrs:{src:e.avatarUrl}}),t._v("\n        "+t._s(e.login)+" \n        "),n("span",{class:t.s.floor},[t._v("· "+t._s(e.homeFloor)+" этаж")])],1)})):t._e()],1),t._v(" "),n("div",{class:t.s.chosenAttendees},t._l(t.field.value,function(e,s){return n("div",{key:e,class:t.s.chosenAttendee},[n("avatar-image",{class:t.s.avatar,attrs:{src:t.usersById[e].avatarUrl}}),t._v(" "),n("span",[t._v(t._s(t.usersById[e].login))]),t._v(" "),n("cross-button",{attrs:{label:"Удалить"},nativeOn:{click:function(e){t.form.mutators.remove("usersIds",s)}}})],1)}))])},staticRenderFns:[]};var Mt=n("VU/8")(Dt,Ot,!1,function(t){this.s=n("dgcR"),this.sh=n("MaSs")},null,null).exports,Pt={props:{src:{type:String,required:!0},size:{type:String}}},Tt={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{class:this.s.avatar,style:{backgroundImage:"url("+this.src+")",width:this.size,height:this.size}})},staticRenderFns:[]};var Ct=n("VU/8")(Pt,Tt,!1,function(t){this.s=n("RbsG")},null,null).exports,At={data:function(){return{icons:{cross:Z}}},props:{label:{type:String,default:"Стереть"}}},It={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{class:t.s.clearButton,attrs:{type:"button"}},[n("svg",{class:t.s.clearIcon},[n("use",{attrs:{"xlink:href":t.icons.cross.url}})]),t._v(" "),n("span",{class:t.sh.srOnly},[t._v(t._s(t.label))])])},staticRenderFns:[]};var Bt=n("VU/8")(At,It,!1,function(t){this.s=n("Qil3"),this.sh=n("eH8I")},null,null).exports,Ft={bind:function(t,e,n){if("function"!=typeof e.value){var s=n.context.name,i="[Vue-click-outside:] provided expression '"+e.expression+"' is not a function, but has to be";s&&(i+="Found in component '"+s+"'"),console.warn(i)}var o=function(n){t.contains(n.target)||t===n.target||e.value(n)};t.__vueClickOutside__=o,document.addEventListener("click",o)},unbind:function(t){document.removeEventListener("click",t.__vueClickOutside__),t.__vueClickOutside__=null}},Rt=(n("ulq9"),n("u1/p")),Vt=n("rp1p"),Lt=n("+dIz"),Ut=new Vt.a({uri:"http://localhost:3000/graphql"}),Ht=new Rt.a({link:Ut,cache:new Lt.a,connectToDevTools:!0}),Nt={namespaced:!0,state:{date:Date.now()},mutations:{GO_TO_NEXT_DAY:function(t){t.date=v()(t.date).add(1,"day").valueOf()},GO_TO_PREVIOUS_DAY:function(t){t.date=v()(t.date).subtract(1,"day").valueOf()},SET_DATE:function(t,e){t.date=e}},getters:{earliestMoment:function(t){return v()(t.date).set({hour:7,minute:0,second:0})},latestMoment:function(t){return v()(t.date).add(1,"days").set({hour:0,minute:0,second:0})}}},jt=n("Xxa5"),Yt=n.n(jt),$t=n("2R8v"),qt=n.n($t),Gt=n("exGp"),Wt=n.n(Gt),zt=n("tlQw"),Jt=n.n(zt),Kt=qt()(["{\n            rooms {\n              id\n              title\n              capacity\n              floor\n            }\n          }"],["{\n            rooms {\n              id\n              title\n              capacity\n              floor\n            }\n          }"]),Xt={namespaced:!0,state:{data:[],isLoaded:!1,isLoading:!1},mutations:{FETCH:function(t){ft()(t,{isLoaded:!1,isLoading:!0})},FETCH_SUCCESS:function(t,e){ft()(t,{data:e.data.rooms,isLoaded:!0,isLoading:!1})}},actions:{fetch:function(t){var e=this,n=t.commit,s=t.state,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Wt()(Yt.a.mark(function t(){var o;return Yt.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!i&&(s.isLoaded||s.isLoading)){t.next=6;break}return n("FETCH"),t.next=4,Ht.query({query:Jt()(Kt)});case 4:o=t.sent,n("FETCH_SUCCESS",o);case 6:case"end":return t.stop()}},t,e)}))()}}},Qt=qt()(["{\n            events {\n              id\n              title\n              dateStart\n              dateEnd\n              room {\n                id\n                title\n              }\n              users {\n                id\n                login\n                avatarUrl\n              }\n            }\n          }"],["{\n            events {\n              id\n              title\n              dateStart\n              dateEnd\n              room {\n                id\n                title\n              }\n              users {\n                id\n                login\n                avatarUrl\n              }\n            }\n          }"]),Zt={namespaced:!0,state:{data:[],isLoaded:!1,isLoading:!1},mutations:{FETCH:function(t){ft()(t,{isLoaded:!1,isLoading:!0})},FETCH_SUCCESS:function(t,e){ft()(t,{data:e.data.events,isLoaded:!0,isLoading:!1})}},actions:{fetch:function(t){var e=this,n=t.commit,s=t.state,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Wt()(Yt.a.mark(function t(){var o;return Yt.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!i&&(s.isLoaded||s.isLoading)){t.next=6;break}return n("FETCH"),t.next=4,Ht.query({query:Jt()(Qt)});case 4:o=t.sent,n("FETCH_SUCCESS",o);case 6:case"end":return t.stop()}},t,e)}))()}}},te=qt()(["{\n            users {\n              id\n              login\n              avatarUrl\n              homeFloor\n            }\n          }"],["{\n            users {\n              id\n              login\n              avatarUrl\n              homeFloor\n            }\n          }"]),ee={namespaced:!0,state:{data:[],isLoaded:!1,isLoading:!1},mutations:{FETCH:function(t){ft()(t,{isLoaded:!1,isLoading:!0})},FETCH_SUCCESS:function(t,e){ft()(t,{data:e.data.users,isLoaded:!0,isLoading:!1})}},actions:{fetch:function(t){var e=this,n=t.commit,s=t.state,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Wt()(Yt.a.mark(function t(){var o;return Yt.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!i&&(s.isLoaded||s.isLoading)){t.next=6;break}return n("FETCH"),t.next=4,Ht.query({query:Jt()(te)});case 4:o=t.sent,n("FETCH_SUCCESS",o);case 6:case"end":return t.stop()}},t,e)}))()}}};s.a.use(_.a);var ne=new _.a.Store({modules:{date:Nt,rooms:Xt,events:Zt,users:ee}});v.a.locale("ru"),v.a.updateLocale("ru",{monthsShort:{format:"янв_фев_мар_апр_мая_июня_июля_авг_сен_окт_ноя_дек".split("_"),standalone:"янв_фев_март_апр_май_июнь_июль_авг_сен_окт_ноя_дек".split("_")}}),s.a.component("app-header",V),s.a.component("day-picker",j),s.a.component("date-picker",J),s.a.component("date-picker-home",kt),s.a.component("arrow-button",G),s.a.component("event-rectangle",Q),s.a.component("time-band",nt),s.a.component("date-input",rt),s.a.component("field-input",ut),s.a.component("time-pointer",mt),s.a.component("current-time-pointer",gt),s.a.component("attendees-input",Mt),s.a.component("avatar-image",Ct),s.a.component("cross-button",Bt),s.a.directive("click-outside",Ft),s.a.config.productionTip=!1,new s.a({el:"#app",apolloProvider:Ht,store:ne,router:I,render:function(t){return t(o)}})},Qil3:function(t,e){t.exports={clearButton:"src-components-CrossButton--clearButton_0",clearIcon:"src-components-CrossButton--clearIcon_0",clearButton_active:"src-components-CrossButton--clearButton_active_0"}},RbsG:function(t,e){t.exports={avatar:"src-components-AvatarImage--avatar_0"}},Rjs2:function(t,e){t.exports={dateSelector:"src-components-DayPicker--dateSelector_0",dateButton:"src-components-DayPicker--dateButton_0"}},Yu73:function(t,e){t.exports={input:"src-styles-helpers--input",srOnly:"src-styles-helpers--srOnly",label:"src-styles-helpers--label"}},dgcR:function(t,e){t.exports={chosenAttendee:"src-components-AttendeesInput--chosenAttendee_0",attendees:"src-components-AttendeesInput--attendees_0",suggestions:"src-components-AttendeesInput--suggestions_0",suggestion:"src-components-AttendeesInput--suggestion_0",input:"src-components-AttendeesInput--input_0",inputContainer:"src-components-AttendeesInput--inputContainer_0",clearButton:"src-components-AttendeesInput--clearButton_0",floor:"src-components-AttendeesInput--floor_0",avatar:"src-components-AttendeesInput--avatar_0"}},eH8I:function(t,e){t.exports={input:"src-styles-helpers--input",srOnly:"src-styles-helpers--srOnly",label:"src-styles-helpers--label"}},huMp:function(t,e){t.exports={timePointer:"src-components-TimePointer--timePointer_0",verticalLine:"src-components-TimePointer--verticalLine_0",hour:"src-components-TimePointer--hour_0"}},jMvO:function(t,e){t.exports={input:"src-styles-helpers--input",srOnly:"src-styles-helpers--srOnly",label:"src-styles-helpers--label"}},leNA:function(t,e){t.exports={timeBand:"src-components-TimeBand--timeBand_0",gap:"src-components-TimeBand--gap_0",gapAdd:"src-components-TimeBand--gapAdd_0",cross:"src-components-TimeBand--cross_0"}},pEhl:function(t,e){t.exports={header:"src-components-Header--header_0",logo:"src-components-Header--logo_0"}},txkK:function(t,e){t.exports={floor:"src-components-HomePage--floor_0",timeLine:"src-components-HomePage--timeLine_0",root:"src-components-HomePage--root_0",rooms:"src-components-HomePage--rooms_0",roomList:"src-components-HomePage--roomList_0",timeBand:"src-components-HomePage--timeBand_0",hourBand:"src-components-HomePage--hourBand_0",listItem:"src-components-HomePage--listItem_0",list:"src-components-HomePage--list_0",roomTitle:"src-components-HomePage--roomTitle_0",roomCapacity:"src-components-HomePage--roomCapacity_0",eventsDiagram:"src-components-HomePage--eventsDiagram_0",datePicker:"src-components-HomePage--datePicker_0",pickers:"src-components-HomePage--pickers_0"}},xMxq:function(t,e){t.exports={arrow:"src-components-ArrowButton--arrow_0",arrow_right:"src-components-ArrowButton--arrow_right_0"}},y6yj:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.78426cabe1fe85864f2a.js.map